# 杂技



### DTO转Entity

BeanUtils.copyProperties(A, B)方法

```java
@Override
public User convert(UserInputDTO userInputDTO) {
    User user = new User();
    BeanUtils.copyProperties(userInputDTO, user);
    return user;
}
```



### Validation参数校验

```java
/* 添加依赖 */
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-validation</artifactId>
</dependency>

/* 前后台交互类添加注解 */
public class UserParam {

    @NotNull(message = "用户名不能为空")
    private String userName;

    @NotNull(message = "手机号不能为空")
    @Max(value = 11)
    private String phone;

    @NotNull(message = "邮箱不能为空")
    private String email;
    
}

/* controller入参注解 */ 
@RequestMapping("addUser")
public String addUser(@Validated UserParam userParam, 
                      BindingResult result) {
    
	// BindingResult 是 Spring MVC 验证 DTO 后的一个结果集
    List<FieldError> fieldErrors = result.getFieldErrors();
    if (!fieldErrors.isEmpty()) {
        return fieldErrors.get(0).getDefaultMessage();
    }

    //todo 插入用户信息表
    
    return "SUCCESS";
}
 
```



### Lombok

#### @RequiredArgsConstructor + @NonNull 

```java
@RequiredArgsConstructor(staticName = "ofName")
public class Student {
    @NonNull 
    private String name;
    private int age;
}

Student student = Student.ofName("老哈");
// 等效于，但语义更明确
Student student = new Student("老哈");
```



#### @Builder注解

new一个对象以后set好几行？——用builder！

```Java
@Builder
public class Student {
    private String name;
    private int age;
}

Student stu = Student.builder().name("zs").age(24).build();
```

如下为Builder模式原理：

```Java
public class Student {
    private String name;
    private int age;

    public String getName() {
            return name;
    }

    public void setName(String name) {
            this.name = name;
    }

    public int getAge() {
            return age;
    }

    public void setAge(int age) {
            this.age = age;
    }

    public static Builder builder(){
            return new Builder();
    }
    
    public static class Builder{
            private String name;
            private int age;
            public Builder name(String name){
                    this.name = name;
                    return this;
            }

            public Builder age(int age){
                    this.age = age;
                    return this;
            }

            public Student build(){
                    Student student = new Student();
                    student.setAge(age);
                    student.setName(name);
                    return student;
            }
    }

}

public static void main() {
    Student stu = Student.builder().name("zs").age(24).build();
}
```














# 项目问题

## 自我介绍

17年硕士毕业于北京外国语大学，19年转行开始从事IT行业，~~目前已经有了2年的java开发经验~~。

我自己虽然**不是信息技术科班出身**，但因为喜欢钻研、总希望尽可能全面地掌握一些技术知识点，所以基本功相对来说比较扎实 :

- 对面向对象、多线程、锁机制等有比较深入的了解，
- 可以熟练操作SpringBoot、SpringMVC框架、数据库主流框架mybatis和MybatisPlus，
- 并在工作中熟练应用IoC、AOP等技术，上个月也拿到了spring框架的官方认证，
- 除此以外，对于优化系统所必须的组件，比如redis和MQ、也有一定的应用经验。

在项目经验方面，在上一家公司呆了2年，前前后后跟了4、5个项目，最近一次是跟着项目组，开发维护了一家多语种培训公司的在线学习平台，我当时负责开发并维护了登录模块和整个问答平台的模块，技术栈包括springboot、spring MVC、Spring security、redis和MQ，如果面试官感兴趣我们可以后面再展开。

最后，因为我自己是外语出身，如果公司有需要外语的业务内容，那我想说自己这方面还是很有竞争优势的



## 万能答句

"实际业务中还没接触过，但我可以谈谈我的看法"

“设计和具体落地 没有过多参与（最多拿到一个），但肯定有了解”



## 简单介绍一下这个项目

每月总计1000人上下的学员 ；

**主要模块包括 ：**视频学习模块、用户管理模块、考试测试模块、知识合集下载模块、问答平台模块 ；

前后端分离的项目，根据接口文档完成开发流程 ; 

我工程量比较大的内容是完成**整个问答平台的搭建和维护 **:

- 这个平台功能是 学员 可以针对性地 向讲师提问，提出的问题 是可以公开浏览的，其他学员可以进行浏览点评，类似于 **论坛** 的形式;

- 比如 学员提问时需要说明 问题标题、内容、选择讲师、问题标签 >< 讲师登录后会收到站内信，提示问题 ;
- 问题列表都是公开的，其他学员可以看到所有语种、所有问题列表，进行评论、互动、收藏 ;
- 除此以外，还有 依据点击量实现 热点问题排行榜（通过 redis 统计访问量，key为"hits+问题id"，每次都会incr自增，quartz时间调度工具 / Java API，每天凌晨统计前一天问题访问量前十 ）
- 基于主题的问题列表呈现、问题搜索
- 异步积分追加



## 表设计

### 学员提问

**question问题表：**

id   |   title  |   content  |   images  |   uid、u_nickname  |   status问题状态

to_teacher提问老师  |   hits点击量  |   创建时间、更新时间  |

**question_tag：**问题与标签 多对多 关系 

### **回答问题**

answer表：id、uid、u_nickname、question_id、is_accepted、创建时间、更新时间

answer_desc：  id、answer_desc（富文本）、创建时间、更新时间

### **参与评论**

comment评论表：

id   |   content内容   |   question_id  问题id   

from_uid   评论人id     |     to_cid 目标评论 id

创建时间、更新时间

**概述 :** 评论表设计，不区分评论表和回复表，统一都看成评论

**示例**		

XXX 回复 YYY : 

> 回复内容

from_uid：评论人的id

to_uid : 评论目标人的id，有则显示在"回复"之后 ; 如果没有目标人，则该字段为空



### 热点问题排行榜

不同语种统计当天点击阅读量前十进行展示

- 利用timer实现任务调度：每天0点执行一次redis点击量字段 统计排序，取前十列存入hot_questions表格，表格包括：id、date、question_id ;
- redis存储结构 :  hash类型，key=问题id，value=点击量

` `



```
127.0.0.1:6379> hmset q:1 hits 1
OK
127.0.0.1:6379> hmset q:2 hits 3
OK
127.0.0.1:6379> hmset q:4 hits 89
OK
127.0.0.1:6379> hmset q:255 hits 455
//每次浏览量+1
127.0.0.1:6379> hincrby q:4 hits 1
```



**排序代码逻辑:**

1. redis中存储有set格式的questions，包含所有问题id;
2. 利用sort关键字，`sort questions by q:*->hits limit 0 10;`







## 项目是如何部署的？分布式？有什么模块？有共同模块吗？

- 数据库 和 redis分开部署在不同的服务器 ;
- 课程模块因为涉及到 视频读取 因此与 数据库 同服务器 ;
- 用户注册登录 模块 与 数据库 同服务器 ;



## 介绍一下你负责的内容

注册时 幂等性解决

MQ积分追加消息推送 —> 由下游积分模块考虑幂等性问题，这边是**通过redis自增ID**获取一个积分追加id传到消息队列中 



## 平台没有手机端吗？ 

微信、淘宝店铺一类进行下单操作；

因为是学习目的的，讲师上课有PPT，学员们至少都是Ipad，手机看不清



## 问答平台基本布局

**左侧栏** : 语种 - 专题

**上方** : 主题 

**正中间** : 问题列表

**右侧栏上** : 用户问答模块概述（ 提问--收藏--消息--任务）

**右侧栏下** : 热点问题排行



---------问答平台---------

用户模块（注册、账号密码、手机号登录、密码服务）
问答模块 :

收藏（favorite表，用户与问题Id一 一对应）

问题排行榜

问题 -   问题描述图片上传、点击量hits、问题标签tag

回答

评论

？通知（XXX向你提问了XXX ; XXX回答了你的XXXX）、公告

？微信登录入口

通用模块 : 前端响应类、Json串转换工具、获取验证码手机确认码等
使用redis : 缓存、分布式session
使用MQ : 异步增加学员积分（达到一定积分退还百分比学费）、生成操作日志
		——> 提问、回答获得老师采纳、观看时长、购买衍生辅助课程



## 评论点赞、阅读量如何统计？



碰到过什么技术困难 ? 如何解决 ?





